<div class="container-fluid " style="background-color: rgb(234, 232, 239); height: auto;">
    <div class="row justify-content-center pb-5">
        <div class="col-12 col-md-8 col-lg-6">
            <h1 class="text-center text-dark p-2 mt-4">Modificar producto</h1>
            {{#each data}}
            <form action="/modificar/{{this.id}}" method="POST" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="nombre">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" value="{{this.nombre}}" required>
                </div>
                <div class="form-group">
                    <label for="precio">Precio</label>
                    <input type="number" class="form-control" id="precio" name="precio" value="{{this.precio}}" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="imagen">Imagen</label>
                    <input type="file" class="form-control-file" id="imagen" name="imagen">
                    <img src="/images/{{this.imagen}}" alt="{{this.nombre}}" width="100" class="mt-2">
                    <input type="hidden" name="currentImage" value="{{this.imagen}}">
                </div>
                <button type="submit" class="btn btn-primary">Guardar</button>
            </form>
            {{/each}}
        </div>
    </div>
</div>

<script>
    let archivo = document.getElementById("imagen");
    let imagen = document.getElementById("imagenProbando");
    let file;

    archivo.addEventListener("change", function () {
        file = archivo.files[0];
        if (file) {
            const fileReader = new FileReader();
            fileReader.addEventListener("load", function () {
                imagen.setAttribute("src", fileReader.result);
            })
            fileReader.readAsDataURL(file);
        }
    })
</script>
